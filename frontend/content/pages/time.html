<div class="card main-color-bg" style="border-radius: 15px; height: 100%;" id="time">
    <div class="container-fluid text-white m-2" style="height: 100%;">
        <h1 class="h1">Time</h1>
        <div style="height: 100%;">
            <div style="height: 50%;">

            </div>
            <div>
                <input type="text" id="inputField" placeholder="Timezone" class="form-control form-control-sm">
                <div id="suggestions" class="dropdown-menu"></div>
            </div>
        </div>
    </div>
</div>

<style>
    /* #suggestions {
        border: 1px solid #ccc;
        max-height: 150px;
        overflow-y: auto;
        display: none;
    } */
    .suggestion-item {
        padding: 8px;
        cursor: pointer;
    }

    .suggestion-item:hover {
        background-color: #f0f0f0;
    }
</style>

<script>
    // Predefined list of suggestions
    // const suggestionsList = [
    //     "Apple", "Apricot", "Avocado", "Banana", "Blueberry", "Blackberry", "Cherry",
    //     "Coconut", "Cucumber", "Grape", "Guava", "Lemon", "Lime", "Orange", "Melon",
    //     "Mango", "Peach", "Pear", "Pineapple", "Plum", "Raspberry", "Strawberry",
    //     "Tomato", "Watermelon"
    // ];
    var suggestionsList;

    fetch('/timezones')
        .then(response => response.json())
        .then(data => suggestionsList = data)
        .catch(error => console.error('Error:', error));


    // Get references to the input field and suggestions container
    const inputField = document.getElementById('inputField');
    const suggestionsContainer = document.getElementById('suggestions');

    // Function to filter suggestions based on user input
    function getSuggestions(input) {
        return suggestionsList.filter(item =>
            item.toLowerCase().startsWith(input.toLowerCase())
        ).slice(0, 5);
    }

    // Function to display suggestions
    function showSuggestions(suggestions) {
        if (suggestions.length === 0) {
            suggestionsContainer.style.display = 'none';
            return;
        }

        const suggestionsHTML = suggestions.map(item =>
            `<div class="suggestion-item">${item}</div>`
        ).join('');

        suggestionsContainer.innerHTML = suggestionsHTML;
        suggestionsContainer.style.display = 'block';
    }

    // Event listener for input field
    inputField.addEventListener('input', function () {
        const userInput = inputField.value;
        const filteredSuggestions = getSuggestions(userInput);
        showSuggestions(filteredSuggestions);
    });

    // Event listener for clicking on a suggestion
    suggestionsContainer.addEventListener('click', function (e) {
        if (e.target.classList.contains('suggestion-item')) {
            inputField.value = e.target.textContent;
            suggestionsContainer.style.display = 'none';
        }
    });

    // Hide suggestions when clicking outside
    document.addEventListener('click', function (e) {
        if (e.target !== inputField) {
            suggestionsContainer.style.display = 'none';
        }
    });
</script>